# 🗳️ 投票模板系統文檔
**版本**: v3.0.0  
**完成日期**: 2025-08-15

## 📋 系統概述

投票模板系統是Phase 3開發的核心功能，提供預設模板和自定義模板功能，讓用戶能夠快速創建各種類型的投票。

## ✨ 主要功能

### 🎯 核心特性

1. **預定義模板**
   - 📊 民意調查 - 簡單單選/多選調查
   - 🗓️ 活動安排 - 時間選擇投票
   - 🍕 聚餐選擇 - 地點、菜單投票
   - ⭐ 評分投票 - 1-5星滿意度調查
   - 🎮 遊戲選擇 - 遊戲和娛樂投票

2. **自定義模板**
   - 創建專屬模板
   - 變數替換功能
   - 模板收藏系統
   - 使用統計追蹤

3. **智能化功能**
   - 變數替換 (`{變數名}`)
   - 使用次數統計
   - 熱門模板推薦
   - 搜尋功能

## 🚀 使用方法

### 基本使用流程

1. **啟動模板系統**
   ```
   /vote_template
   ```

2. **選擇模板類別**
   - 從下拉選單選擇類別
   - 瀏覽該類別的可用模板

3. **選擇並自定義模板**
   - 點擊模板查看詳情
   - 使用模板並自定義變數

4. **創建投票**
   - 系統自動應用模板生成投票
   - 投票立即發布到頻道

### 高級功能

#### 模板收藏
- 點擊 ⭐ 收藏常用模板
- 通過「我的收藏」快速訪問

#### 自定義模板
- 點擊「🛠️ 創建模板」
- 設定模板名稱、描述、標題和選項
- 支援變數替換功能

#### 變數替換
模板支援變數替換，格式為 `{變數名}`：
```
標題模板: "{topic}意見調查"
變數輸入: topic=環保政策
結果: "環保政策意見調查"
```

## 🗂️ 系統架構

### 資料庫結構

#### vote_templates 表
```sql
- id: 模板ID
- name: 模板名稱  
- description: 模板描述
- category: 模板類別
- guild_id: 所屬群組ID
- creator_id: 創建者ID
- is_public: 是否公開
- title_template: 標題模板
- options_template: 選項模板(JSON)
- default_*: 預設設定
- usage_count: 使用次數
```

#### vote_template_tags 表
```sql
- template_id: 模板ID
- tag: 標籤名稱
```

#### vote_template_favorites 表
```sql
- template_id: 模板ID
- user_id: 用戶ID
- guild_id: 群組ID
```

### 代碼結構

#### 資料存取層 (DAO)
- `bot/db/vote_template_dao.py`
  - 資料庫操作
  - CRUD 功能
  - 收藏管理

#### 業務邏輯層 (Service)
- `bot/services/vote_template_manager.py`
  - 預定義模板管理
  - 模板應用邏輯
  - 變數替換處理

#### 使用者介面層 (Views)
- `bot/views/vote_template_views.py`
  - Discord UI 組件
  - 模態框和按鈕
  - 互動邏輯處理

## 📊 預定義模板詳情

### 1. 📊 民意調查類別

#### 簡單民意調查
- **用途**: 快速收集意見
- **選項**: 贊成/反對/中立
- **特色**: 匿名投票
- **時長**: 2小時

#### 多選民調
- **用途**: 複選題調查
- **選項**: 可自定義4個選項
- **特色**: 公開多選
- **時長**: 3小時

### 2. 🗓️ 活動安排類別

#### 活動時間投票
- **用途**: 選擇活動時間
- **選項**: 週末時段選擇
- **特色**: 多選投票
- **時長**: 4小時

#### 會議時段選擇
- **用途**: 安排會議時間
- **選項**: 工作日時段
- **特色**: 公開多選
- **時長**: 2小時

### 3. 🍕 聚餐選擇類別

#### 聚餐地點投票
- **用途**: 選擇聚餐地點
- **選項**: 各式料理選擇
- **特色**: 單選投票
- **時長**: 3小時

#### 飲料選擇
- **用途**: 團購飲料
- **選項**: 各式飲品
- **特色**: 多選投票
- **時長**: 1小時

### 4. ⭐ 評分投票類別

#### 滿意度調查
- **用途**: 1-5星評分
- **選項**: 星級評分選項
- **特色**: 匿名投票
- **時長**: 4小時

### 5. 🎮 遊戲選擇類別

#### 遊戲選擇投票
- **用途**: 選擇遊戲
- **選項**: 熱門遊戲
- **特色**: 公開單選
- **時長**: 30分鐘

#### 電競比賽預測
- **用途**: 比賽結果預測
- **選項**: 勝負平局
- **特色**: 公開單選
- **時長**: 1小時

## 🔧 配置與設定

### 系統初始化
模板系統會在Bot啟動時自動初始化：
1. 創建必要的資料表
2. 載入預定義模板
3. 設定默認配置

### 權限控制
- **使用模板**: 所有用戶
- **創建自定義模板**: 所有用戶
- **公開模板**: 需要管理員權限
- **刪除模板**: 創建者或管理員

## 📈 統計與分析

### 使用統計
- 模板使用次數追蹤
- 熱門模板排序
- 用戶使用行為分析

### 搜尋功能
支援以下維度搜尋：
- 模板名稱
- 模板描述  
- 模板標籤
- 類別篩選

## 🚀 未來擴展

### 計劃中的功能
1. **模板分享**
   - 群組間模板分享
   - 模板市場

2. **高級變數替換**
   - 條件邏輯
   - 動態選項生成

3. **模板統計分析**
   - 使用趨勢分析
   - 效果評估

4. **AI輔助模板**
   - 智能模板推薦
   - 自動模板生成

## 💡 使用技巧

### 最佳實踐
1. **善用變數替換**
   - 創建通用模板，使用變數自定義
   - 常用變數：topic, event_name, date, location

2. **合理分類**
   - 根據用途選擇合適類別
   - 利用標籤功能增強搜尋

3. **收藏管理**
   - 收藏常用模板提高效率
   - 定期清理無用收藏

### 故障排除
1. **模板無法載入**
   - 檢查資料庫連接
   - 確認權限設定

2. **變數替換失敗**
   - 檢查變數格式 `{變數名}`
   - 確認變數名稱正確

3. **模板創建失敗**
   - 檢查必填欄位
   - 確認選項格式正確

## 📞 技術支援

如遇到問題，請查看：
1. Bot日誌檔案
2. 資料庫連接狀態
3. Discord權限設定

---

**文檔版本**: 1.0  
**最後更新**: 2025-08-15  
**維護者**: 開發團隊