# 🗳️ 投票系統

> 強大的社群決策工具，支援實時統計和多種投票模式

## 📋 功能概覽

Potato Bot 的投票系統是一個全功能的社群決策工具，支援多種投票類型和進階功能。

### 🌟 核心特性

- **🚀 實時投票結果** - WebSocket 即時更新
- **🎯 多種投票模式** - 單選、多選、排序投票
- **🔒 隱私控制** - 匿名投票、結果可見性設定
- **⏰ 時間管理** - 自動開始/結束、倒數計時
- **📊 詳細統計** - 參與率分析、趨勢圖表
- **🏷️ 分類標籤** - 組織和篩選投票
- **🔔 智能通知** - 相關用戶自動提醒

## 🎮 基本使用

### 創建投票

=== "簡易投票"
    ```
    /vote create
    📋 標題: 下週團隊聚餐地點
    📝 描述: 選擇大家都方便的餐廳
    
    選項:
    🍕 義式餐廳
    🍜 拉麵店  
    🥘 火鍋店
    🍖 燒肉店
    
    ⚙️ 設定:
    • 投票模式: 單選
    • 結束時間: 3天後
    • 結果可見: 即時顯示
    ```

=== "多選投票"
    ```
    /vote create
    📋 標題: 下次活動想參加的項目
    📝 描述: 可選擇多項 (最多3個)
    
    選項:
    🎮 遊戲比賽
    🎵 卡拉OK
    🎬 電影欣賞
    🏸 羽毛球
    🃏 桌遊夜
    
    ⚙️ 設定:
    • 投票模式: 多選 (最多3項)
    • 最大選擇數: 3
    • 結束時間: 1週後
    ```

=== "匿名投票"
    ```
    /vote create
    📋 標題: 管理團隊服務滿意度調查
    📝 描述: 匿名投票，請誠實評價
    
    選項:
    😍 非常滿意
    😊 滿意
    😐 普通
    😞 不滿意
    😡 非常不滿意
    
    ⚙️ 設定:
    • 投票模式: 單選
    • 隱私設定: 完全匿名
    • 結果可見: 投票結束後
    ```

### 參與投票

!!! example "投票參與流程"
    1. **找到投票** - 在投票頻道或使用 `/vote list`
    2. **閱讀說明** - 了解投票主題和規則  
    3. **做出選擇** - 點擊按鈕或使用選單
    4. **確認投票** - 系統會顯示確認訊息
    5. **查看結果** - 即時統計或等待結果公佈

## 🎯 進階功能

### 投票模式詳解

=== "單選投票"
    - **使用場景**: 需要唯一決定的問題
    - **選擇限制**: 只能選擇一個選項
    - **結果統計**: 百分比和票數
    - **適用範例**: 選擇活動時間、決定餐廳

=== "多選投票"  
    - **使用場景**: 需要收集多個意見
    - **選擇限制**: 可設定最大選擇數
    - **結果統計**: 每選項獨立計算百分比
    - **適用範例**: 活動項目選擇、功能需求調查

=== "排序投票"
    - **使用場景**: 需要優先順序排列
    - **選擇方式**: 拖拉排序或數字標記
    - **結果統計**: 加權平均分數
    - **適用範例**: 功能開發優先級、候選人排名

### 權限與角色

| 功能 | 一般用戶 | VIP會員 | 客服 | 管理員 |
|------|----------|---------|------|--------|
| 參與投票 | ✅ | ✅ | ✅ | ✅ |
| 創建投票 | ❌ | ✅ | ✅ | ✅ |
| 提前結束投票 | ❌ | ❌ | ❌ | ✅ |
| 刪除投票 | ❌ | ❌ | ❌ | ✅ |
| 修改投票設定 | ❌ | ❌ | ❌ | ✅ |
| 查看詳細統計 | ❌ | ❌ | ✅ | ✅ |

### 投票設定選項

#### 時間控制
- **立即開始** - 創建後立即開放投票
- **定時開始** - 設定特定時間開始
- **自動結束** - 到期自動結束並公布結果
- **手動結束** - 由創建者或管理員手動結束

#### 隱私設定
- **公開投票** - 所有人可見投票者和選擇
- **半匿名** - 可見投票者但隱藏選擇
- **完全匿名** - 隱藏投票者和選擇
- **結果可見性** - 即時/投票結束後/僅管理員

#### 參與限制
- **角色限制** - 僅特定角色可參與
- **人數限制** - 設定最大參與人數
- **重複投票** - 允許/禁止修改選擇
- **參與條件** - 設定積分或等級要求

## 📊 實時統計系統

### WebSocket 即時更新

我們的投票系統採用 WebSocket 技術，提供真正的實時體驗：

```javascript
// 實時更新示例
{
  "event": "vote_update",
  "vote_id": "V20250904001", 
  "current_stats": {
    "total_votes": 156,
    "participation_rate": "78%",
    "options": [
      {"id": 1, "text": "選項A", "votes": 67, "percentage": 43},
      {"id": 2, "text": "選項B", "votes": 89, "percentage": 57}
    ]
  }
}
```

### 統計圖表

=== "參與趨勢"
    ```
    📈 投票參與趨勢
    
    時間軸: 過去24小時
    ████████████░░░░ 156票 (目標200票)
    
    高峰時段:
    🕘 09:00-12:00  ████████ 45票
    🕐 13:00-16:00  ██████ 32票  
    🕖 19:00-22:00  ██████████ 79票
    ```

=== "選項分析"
    ```
    📊 選項得票分析
    
    🍕 義式餐廳    ████████████ 67票 (43%)
    🍜 拉麵店      ██████ 34票 (22%) 
    🥘 火鍋店      ████████ 45票 (29%)
    🍖 燒肉店      ██ 10票 (6%)
    
    趨勢: 🍕 義式餐廳 領先，🥘 火鍋店 快速追趕
    ```

## 🔧 管理功能

### 投票管理指令

| 指令 | 功能 | 權限要求 |
|------|------|----------|
| `/vote create` | 創建新投票 | VIP+/管理員 |
| `/vote edit <ID>` | 修改投票設定 | 創建者/管理員 |
| `/vote end <ID>` | 提前結束投票 | 創建者/管理員 |
| `/vote delete <ID>` | 刪除投票 | 管理員 |
| `/vote clone <ID>` | 複製投票模板 | VIP+/管理員 |

### 批量操作

```bash
# 查看所有進行中的投票
/vote list --status active

# 查看特定類別的投票  
/vote list --category 活動規劃

# 批量結束過期投票
/vote cleanup --expired

# 匯出投票統計數據
/vote export <ID> --format csv
```

### 投票模板

預設模板讓創建投票更簡單：

=== "活動投票模板"
    ```yaml
    template: "event_planning"
    title: "【活動規劃】{ACTIVITY_NAME}"
    description: "投票決定活動相關事宜"
    options_type: "multiple_choice"
    max_choices: 3
    duration: "7_days"
    privacy: "public"
    ```

=== "滿意度調查模板"
    ```yaml
    template: "satisfaction_survey"  
    title: "【滿意度調查】{TOPIC}"
    description: "請為我們的服務評分"
    options: ["非常滿意", "滿意", "普通", "不滿意", "非常不滿意"]
    type: "single_choice"
    privacy: "anonymous"
    ```

## 🎨 自訂化設定

### 界面客製化

- **投票卡片樣式** - 自訂顏色和佈局
- **按鈕文字** - 客製化互動按鈕
- **統計圖表** - 選擇圖表類型和風格
- **通知樣式** - 個人化提醒方式

### 整合功能

- **行事曆整合** - 自動創建活動提醒
- **角色管理** - 根據投票結果自動分配角色
- **積分系統** - 參與投票獲得獎勵
- **Webhook 通知** - 整合外部系統通知

## 🛠️ API 介面

### REST API 端點

```http
# 獲取投票列表
GET /api/v1/votes
Response: {"votes": [...], "total": 42}

# 創建投票
POST /api/v1/votes
Body: {"title": "...", "options": [...]}

# 參與投票  
POST /api/v1/votes/{vote_id}/vote
Body: {"choices": [1, 3]}

# 獲取投票結果
GET /api/v1/votes/{vote_id}/results
Response: {"stats": {...}, "realtime": true}
```

### WebSocket 端點

```javascript
// 連接實時投票更新
ws://your-bot-domain/api/ws/votes/{vote_id}

// 接收更新事件
{
  "event": "vote_cast",
  "voter": "User#1234", 
  "choices": [2],
  "timestamp": "2025-09-04T12:30:00Z"
}
```

## 📱 移動端支援

### 響應式設計

我們的投票界面完美適配各種裝置：

- **📱 手機** - 觸控友好的按鈕設計
- **📟 平板** - 最佳化的橫屏佈局  
- **💻 桌機** - 豐富的互動功能
- **⌚ 穿戴裝置** - 簡化的快速投票

### PWA 支援

- **離線快取** - 在沒有網路時查看投票
- **推播通知** - 重要投票提醒
- **快速存取** - 主畫面圖示快速開啟
- **背景更新** - 自動同步最新結果

## 🔍 故障排除

### 常見問題

??? question "投票按鈕沒有回應"
    **可能原因:**
    - 網路連線問題
    - 權限不足
    - 投票已結束
    
    **解決方法:**
    1. 重新整理頁面
    2. 檢查網路連線
    3. 確認投票狀態

??? question "看不到投票結果"
    **可能原因:**
    - 投票設為私密
    - 還沒到公布時間
    - 權限限制
    
    **解決方法:**
    1. 聯繫投票創建者
    2. 等待公布時間
    3. 檢查權限設定

??? question "無法創建投票"
    **可能原因:**
    - 權限不足
    - 選項數量超限
    - 必要欄位未填
    
    **解決方法:**
    1. 檢查角色權限
    2. 減少選項數量
    3. 完整填寫所有欄位

### 聯繫支援

- 🎫 **技術支援**: 使用 `/ticket create` 指令來回報問題

---

🎉 **開始使用投票系統！**

投票系統是促進社群參與和民主決策的強大工具。立即使用 `/vote create` 創建你的第一個投票，體驗實時統計的魅力！

需要更多功能介紹？查看票券系統或 AI 助手等相關說明文件。